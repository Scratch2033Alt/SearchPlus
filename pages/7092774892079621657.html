<!DOCTYPE html><html dir="ltr" lang="en"><head><meta charset="utf-8"><meta name="generator" content="ReSpec 24.23.4"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><style>/* --- EXAMPLES --- */
span.example-title {
    text-transform: none;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example span.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
.issue-label {
    text-transform: initial;
}

.warning > p:first-child { margin-top: 0 }
.warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
span.warning { padding: .1em .5em .15em; }

.issue.closed span.issue-number {
    text-decoration: line-through;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}

.issue a.respec-gh-label {
  padding: 5px;
  margin: 0 2px 0 2px;
  font-size: 10px;
  text-transform: none;
  text-decoration: none;
  font-weight: bold;
  border-radius: 4px;
  position: relative;
  bottom: 2px;
  border: none;
}

.issue a.respec-label-dark {
  color: #fff;
  background-color: #000;
}

.issue a.respec-label-light {
  color: #000;
  background-color: #fff;
}
</style>
  <title>Preload</title>
  
  
  
<style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

@keyframes pop {
  0% {
    transform: scale(1, 1);
  }
  25% {
    transform: scale(1.25, 1.25);
    opacity: 0.75;
  }
  100% {
    transform: scale(1, 1);
  }
}

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

.respec-offending-element:target {
  animation: pop 0.25s ease-in-out 0s 1;
}

/* TODO: Remove once https://github.com/w3c/tr-design/pull/176 is merged. */
.respec-offending-element a[href] {
  margin: 0;
}

.respec-offending-element {
  display: inline-block;
  position: relative;
  /* Red squiggly line */
  background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=)
    bottom repeat-x;
}
@supports (text-decoration-style: wavy) {
  .respec-offending-element {
    background: none;
    text-decoration-line: underline;
    text-decoration-style: wavy;
    text-decoration-color: red;
  }
}

#references :target {
  background: #eaf3ff;
  animation: pop 0.4s ease-in-out 0s 1;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

a[href].orcid {
    padding-left: 4px;
    padding-right: 4px;
}

a[href].orcid > svg {
    margin-bottom: -2px;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd > p:first-child {
  margin-top: 0;
}

.section dd > p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary > ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details > * {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
}

details.respec-tests-details[open] > summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details > ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details > li {
  padding-left: 1em;
}

a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
}

h2,
h3,
h4,
h5,
h6 {
  position: relative;
}

aside.example .marker > a.self-link {
  color: inherit;
}

h2 > a.self-link,
h3 > a.self-link,
h4 > a.self-link,
h5 > a.self-link,
h6 > a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: 0.5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity 0.2s;
  width: 2em;
}

h2 > a.self-link::before,
h3 > a.self-link::before,
h4 > a.self-link::before,
h5 > a.self-link::before,
h6 > a.self-link::before {
  content: "§";
  display: block;
}

@media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2 > a.self-link,
  h3 > a.self-link,
  h4 > a.self-link,
  h5 > a.self-link,
  h6 > a.self-link {
    left: auto;
    top: auto;
  }
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style><link rel="canonical" href="https://www.w3.org/TR/preload/"><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style><style>var {
  position: relative;
  cursor: pointer;
}

var[data-type]::before,
var[data-type]::after {
  position: absolute;
  left: 50%;
  top: -6px;
  opacity: 0;
  transition: opacity 0.4s;
  pointer-events: none;
}

/* the triangle or arrow or caret or whatever */
var[data-type]::before {
  content: "";
  transform: translateX(-50%);
  border-width: 4px 6px 0 6px;
  border-style: solid;
  border-color: transparent;
  border-top-color: #000;
}

/* actual text */
var[data-type]::after {
  content: attr(data-type);
  transform: translateX(-50%) translateY(-100%);
  background: #000;
  text-align: center;
  /* additional styling */
  font-family: "Dank Mono", "Fira Code", monospace;
  font-style: normal;
  padding: 6px;
  border-radius: 3px;
  color: #daca88;
  text-indent: 0;
  font-weight: normal;
}

var[data-type]:hover::after,
var[data-type]:hover::before {
  opacity: 1;
}
</style><script id="initialUserConfig" type="application/json">{
  "shortName": "preload",
  "specStatus": "CR",
  "publishDate": "2019-06-26",
  "crEnd": "2019-07-26",
  "previousMaturity": "CR",
  "previousPublishDate": "2017-10-26",
  "edDraftURI": "https://w3c.github.io/preload/",
  "editors": [
    {
      "name": "Ilya Grigorik",
      "url": "https://www.igvita.com/",
      "mailto": "igrigorik@gmail.com",
      "company": "Google",
      "companyURL": "https://google.com/",
      "w3cid": "56102"
    },
    {
      "name": "Yoav Weiss",
      "url": "https://blog.yoav.ws/",
      "mailto": "yoav@yoav.ws",
      "company": "Akamai",
      "companyURL": "https://akamai.com/",
      "w3cid": "58673"
    }
  ],
  "wg": "Web Performance Working Group",
  "wgURI": "https://www.w3.org/webperf/",
  "license": "w3c-software-doc",
  "wgPublicList": "public-web-perf",
  "subjectPrefix": "[preload]",
  "format": "markdown",
  "testSuiteURI": "https://github.com/web-platform-tests/wpt/tree/master/preload",
  "implementationReportURI": "https://wpt.fyi/results/preload",
  "github": "https://github.com/w3c/preload/",
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/45211/status",
  "caniuse": "link-rel-preload",
  "publishISODate": "2019-06-26T00:00:00.000Z",
  "generatedSubtitle": "Candidate Recommendation 26 June 2019"
}</script><meta name="description" content="This specification defines the preload keyword that may be used
with link elements. This keyword provides a declarative fetch primitive
that initiates an early fetch and separates fetching from resource
execution."><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-CR"></head>
<body class="h-entry"><div class="head">
      <a class="logo" href="https://www.w3.org/"><img alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" height="48"></a> <h1 id="title" class="title p-name">Preload</h1>
      
      <h2>
        W3C Candidate Recommendation
        <time class="dt-published" datetime="2019-06-26">26 June 2019</time>
      </h2>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://www.w3.org/TR/2019/CR-preload-20190626/">https://www.w3.org/TR/2019/CR-preload-20190626/</a>
              </dd><dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/preload/">https://www.w3.org/TR/preload/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/preload/">https://w3c.github.io/preload/</a></dd>
        <dt>Test suite:</dt><dd><a href="https://github.com/web-platform-tests/wpt/tree/master/preload">https://github.com/web-platform-tests/wpt/tree/master/preload</a></dd>
        <dt>Implementation report:</dt><dd>
                <a href="https://wpt.fyi/results/preload">https://wpt.fyi/results/preload</a>
              </dd>
        
        
        <dt>Previous version:</dt><dd><a href="https://www.w3.org/TR/2017/CR-preload-20171026/">https://www.w3.org/TR/2017/CR-preload-20171026/</a></dd>
        
        <dt>Editors:</dt>
        <dd class="p-author h-card vcard" data-editor-id="56102"><a class="ed_mailto u-email email p-name" href="mailto:igrigorik@gmail.com">Ilya Grigorik</a>
            (<a class="p-org org h-org h-card" href="https://google.com/">Google</a>)
          </dd><dd class="p-author h-card vcard" data-editor-id="58673"><a class="ed_mailto u-email email p-name" href="mailto:yoav@yoav.ws">Yoav Weiss</a>
            (<a class="p-org org h-org h-card" href="https://akamai.com/">Akamai</a>)
          </dd>
        
        
        <dt>Participate:</dt><dd>
      <a href="https://github.com/w3c/preload/">GitHub w3c/preload</a>
    </dd><dd>
      <a href="https://github.com/w3c/preload/issues/">File a bug</a>
    </dd><dd>
      <a href="https://github.com/w3c/preload/commits/gh-pages">Commit history</a>
    </dd><dd>
      <a href="https://github.com/w3c/preload/pulls/">Pull requests</a>
    </dd>
      <dt class="caniuse-title">Browser support:</dt><dd class="caniuse-stats"><a href="https://caniuse.com/link-rel-preload">caniuse.com</a></dd></dl>
      
      
      
      <p class="copyright">
      <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
      ©
      2019
      
      <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
      <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
      <a href="https://ev.buaa.edu.cn/">Beihang</a>). 
      W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
      <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules
      apply.
    </p>
      <hr title="Separator for header">
    </div><section id="abstract" class="introductory"><h2>Abstract</h2><p>This specification defines the <a href="#dfn-preload-keyword" class="internalDFN" data-link-type="dfn">preload</a> keyword that may be used
with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> elements. This keyword provides a declarative fetch primitive
that initiates an early fetch and separates fetching from resource
execution.</p></section><section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em></p><p>This is a <strong>work in progress</strong> and may change without any
notices.</p><p id="unstable"><strong class="redNote">Implementers <em class="rfc2119" title="SHOULD">SHOULD</em> be aware that
    this document is not stable.</strong> Implementers who are not taking part
in the discussions are likely to find the specification changing out from
under them in incompatible ways. Vendors interested in implementing this
document before it eventually reaches the Candidate Recommendation stage
<em class="rfc2119" title="SHOULD">SHOULD</em> join the mailing lists below and take part in the discussions.</p><p>
                        This document was published by the <a href="https://www.w3.org/webperf/">Web Performance Working Group</a> as
                        a Candidate Recommendation.
                        This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
                      </p><p>
      <a href="https://github.com/w3c/preload/issues/">GitHub Issues</a> are preferred for
            discussion of this specification.
          
      Alternatively, you can send comments to our mailing list.
            Please send them to
            <a href="mailto:public-web-perf@w3.org?subject=%5Bpreload%5D">public-web-perf@w3.org</a>
            (<a href="https://lists.w3.org/Archives/Public/public-web-perf/">archives</a>)
                  with <code>[preload]</code> at the start of your
                  email's subject
                .
          
    </p><p>
                              
                  <abbr title="World Wide Web Consortium">W3C</abbr> publishes a Candidate Recommendation to indicate that the document is believed to be
                  stable and to encourage implementation by the developer community. This Candidate
                  Recommendation is expected to advance to Proposed Recommendation no earlier than
                  26 July 2019.
                
                              
                              
                            </p><p>
      Please see the Working Group's
      <a href="https://wpt.fyi/results/preload">implementation report</a>.
    </p><p>
      Publication as a Candidate Recommendation does not imply endorsement by the
      <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may be updated, replaced or
      obsoleted by other documents at any time. It is inappropriate to cite this
      document as other than work in progress.
    </p><p>
      
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
       
      
                  <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                  <a rel="disclosure" href="https://www.w3.org/2004/01/pp-impl/45211/status">public list of any patent disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
      
    </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2019/Process-20190301/">1 March 2019 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#dependencies"><bdi class="secno">1. </bdi>
Dependencies
</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">2. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#link-type-preload"><bdi class="secno">3. </bdi>Link type "<code>preload</code>"</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#processing"><bdi class="secno">3.1 </bdi>Processing</a></li><li class="tocline"><a class="tocxref" href="#as-attribute"><bdi class="secno">3.2 </bdi><code>as</code> attribute</a></li><li class="tocline"><a class="tocxref" href="#server-push-http-2"><bdi class="secno">3.3 </bdi>Server Push (HTTP/2)</a></li></ol></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">4. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">A. </bdi>Use cases</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#early-fetch-of-critical-resources"><bdi class="secno">A.1 </bdi>Early fetch of critical resources</a></li><li class="tocline"><a class="tocxref" href="#early-fetch-and-application-defined-execution"><bdi class="secno">A.2 </bdi>Early fetch and application defined execution</a></li><li class="tocline"><a class="tocxref" href="#developer-server-and-proxy-initiated-fetching"><bdi class="secno">A.3 </bdi>Developer, server, and proxy-initiated fetching</a></li></ol></li><li class="tocline"><a class="tocxref" href="#iana-considerations"><bdi class="secno">B. </bdi>IANA Considerations</a></li><li class="tocline"><a class="tocxref" href="#privacy"><bdi class="secno">C. </bdi>Privacy and Security</a></li><li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">D. </bdi>Acknowledgments</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">E. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">E.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">E.2 </bdi>Informative references</a></li></ol></li></ol></nav><section id="dependencies"><h2 id="x1-dependencies"><bdi class="secno">1. </bdi>
Dependencies
<a class="self-link" aria-label="§" href="#dependencies"></a></h2><p>
The terms <dfn data-dfn-type="dfn" id="dfn-link"><a href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a></dfn>,
        <dfn data-dfn-type="dfn" id="dfn-inserted-into-a-document"><a href="https://html.spec.whatwg.org/multipage/#insert-an-element-into-a-document">inserted into a document</a></dfn>,
        <dfn data-dfn-type="dfn" id="dfn-resolve"><a href="https://html.spec.whatwg.org/multipage/#resolve-a-url">resolve</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-url"><a href="https://html.spec.whatwg.org/multipage/#url">url</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-crossorigin"><a href="https://html.spec.whatwg.org/multipage/#attr-link-crossorigin">crossorigin</a></dfn>,
        <dfn data-dfn-type="dfn" id="dfn-origin"><a href="https://html.spec.whatwg.org/multipage/#origin-2">origin</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-delay-the-load-event"><a href="https://html.spec.whatwg.org/multipage/#delay-the-load-event">delay the load event</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-external-resource-link"><a href="https://html.spec.whatwg.org/multipage/#external-resource-link">external resource link</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-valid-media-query-list"><a href="https://html.spec.whatwg.org/multipage/#valid-media-query-list">valid media query list</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-queue-a-task"><a href="https://html.spec.whatwg.org/multipage/#queue-a-task">queue a task</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-fetch-and-process-the-linked-resource"><a href="https://html.spec.whatwg.org/multipage/#fetch-and-process-the-linked-resource">fetch and process the linked resource</a></dfn>,
        <dfn data-dfn-type="dfn" id="dfn-match-the-environment"><a href="https://html.spec.whatwg.org/multipage/#matches-the-environment">match the environment</a></dfn>,
and <dfn data-dfn-type="dfn" id="dfn-process-the-linked-resource"><a href="https://html.spec.whatwg.org/multipage/#process-the-linked-resource">process the linked resource</a></dfn> are defined in [<cite><a class="bibref" href="#bib-html" title="HTML Standard" data-link-type="biblio">HTML</a></cite>].
</p><p>
The terms <dfn data-dfn-type="dfn" id="dfn-document"><a href="https://dom.spec.whatwg.org/#concept-document">Document</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-content-type-metadata"><a href="https://dom.spec.whatwg.org/#concept-document-content-type">Content-Type metadata</a></dfn>,
        <dfn data-dfn-type="dfn" id="dfn-fire-an-event"><a href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a></dfn> , <dfn data-dfn-type="dfn" id="dfn-in-a-document-tree"><a href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a></dfn> and
        <dfn data-dfn-type="dfn" id="dfn-node-document"><a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a></dfn> are defined in [<cite><a class="bibref" href="#bib-dom" title="DOM Standard" data-link-type="biblio">DOM</a></cite>].
      </p><p>
The terms <dfn data-dfn-type="dfn" id="dfn-request-destination"><a href="https://fetch.spec.whatwg.org/#concept-request-destination">request destination</a></dfn> and <dfn data-dfn-type="dfn" data-plurals="network errors" id="dfn-network-error"><a href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a></dfn> are defined in [<cite><a class="bibref" href="#bib-fetch" title="Fetch Standard" data-link-type="biblio">FETCH</a></cite>].
</p><p>
The terms <dfn data-dfn-type="dfn" id="dfn-parsable-mime-type"><a href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME type</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-unsupported-mime-type"><a href="https://mimesniff.spec.whatwg.org/#supported-by-the-user-agent">unsupported MIME type</a></dfn> are defined in [<cite><a class="bibref" href="#bib-mimesniff" title="MIME Sniffing Standard" data-link-type="biblio">MIMESNIFF</a></cite>].
</p><p>
The term <code><dfn data-dfn-type="dfn" id="dfn-prefetch"><a href="https://www.w3.org/TR/resource-hints/#dfn-prefetch">prefetch</a></dfn></code> is defined in [<cite><a class="bibref" href="#bib-resource-hints" title="Resource Hints" data-link-type="biblio">RESOURCE-HINTS</a></cite>].
      </p><p>
The terms <dfn data-dfn-type="dfn" id="dfn-integrity-metadata"><a href="https://www.w3.org/TR/SRI/#integrity-metadata">integrity metadata</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-verification-of-html-document-subresources"><a href="https://www.w3.org/TR/SRI/#verification-of-html-document-subresources">verification of HTML document subresources</a></dfn> are defined in [<cite><a class="bibref" href="#bib-sri" title="Subresource Integrity" data-link-type="biblio">SRI</a></cite>].
</p></section><section id="introduction"><h2 id="x2-introduction"><bdi class="secno">2. </bdi>Introduction<a class="self-link" aria-label="§" href="#introduction"></a></h2><p>Many applications require fine-grained control over when resources are
fetched, processed, and applied to the document. For example, the loading
and processing of some resources may be deferred by the application to
reduce resource contention and improve performance of the initial load.
This behavior is typically achieved by moving resource fetching into custom
resource loading logic defined by the application - i.e. resource fetches
are initiated via injected elements, or via <code>XMLHttpRequest</code>, when
particular application conditions are met.</p><p>However, there are also cases where some resources need to be fetched as
early as possible, but their processing and execution logic is subject to
application-specific requirements - e.g. dependency management, conditional
loading, ordering guarantees, and so on. Currently, it is not possible to
deliver this behavior without a performance penalty.</p><ul>
<li>Declaring a resource via one of the existing elements (e.g. <code>img</code>,
<code>script</code>, <code>link</code>) couples resource fetching and execution. Whereas, an
application may want to fetch, but delay execution of the resource until
some condition is met.</li>
<li>Fetching resources with <code>XMLHttpRequest</code> to avoid above behavior
incurs a serious performance penalty by hiding resource declarations from
the user agent's DOM and preload parsers. The resource fetches are only
dispatched when the relevant JavaScript is executed, which due to
abundance of blocking scripts on most pages introduces significant delays
and affects application performance.</li>
</ul><p>The <a href="#dfn-preload-keyword" class="internalDFN" data-link-type="dfn">preload</a> keyword on <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> elements provides a declarative
fetch primitive that addresses the above use case of initiating an early
fetch and separating fetching from resource execution. As such,
<a href="#dfn-preload-keyword" class="internalDFN" data-link-type="dfn">preload</a> keyword serves as a low-level primitive that enables
applications to build custom resource loading and execution behaviors
without hiding resources from the user agent and incurring delayed resource
fetching penalties.</p><p>For example, the application can use the preload keyword to initiate
early, high-priority, and non-render-blocking fetch of a CSS resource that
can then be applied by the application at appropriate time:</p><div class="example" id="example-1-using-markup">
          <div class="marker">
      <a class="self-link" href="#example-1-using-markup">Example<bdi> 1</bdi></a><span class="example-title">: Using markup</span>
    </div> <pre aria-busy="false"><code class="hljs html"><span class="hljs-comment">&lt;!-- preload stylesheet resource via declarative markup --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/styles/other.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>



<span class="hljs-comment">&lt;!-- or, preload stylesheet resource via JavaScript --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> res = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"link"</span>);
res.rel = <span class="hljs-string">"preload"</span>;
res.as = <span class="hljs-string">"style"</span>;
res.href = <span class="hljs-string">"styles/other.css"</span>;
<span class="hljs-built_in">document</span>.head.appendChild(res);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
        </div><div class="example" id="example-2-using-http-header">
          <div class="marker">
      <a class="self-link" href="#example-2-using-http-header">Example<bdi> 2</bdi></a><span class="example-title">: Using HTTP Header</span>
    </div> <pre class="nolinks" aria-busy="false"><code class="hljs http"><span class="hljs-attribute">Link</span>: &lt;https://example.com/other/styles.css&gt;; rel=preload; as=style</code></pre>
        </div><p>As above examples illustrate, the resource can be specified via
declarative markup, Link HTTP header ([<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>]), or scheduled via
JavaScript. See <a href="#use-cases">use cases</a> section for more
hands-on examples of how and where <a href="#dfn-preload-keyword" class="internalDFN" data-link-type="dfn">preload</a> can be used.</p></section><section id="link-type-preload"><h2 id="x2.link-type-preload"><bdi class="secno">3. </bdi>Link type "<code>preload</code>"<a class="self-link" aria-label="§" href="#link-type-preload"></a></h2><p>The <dfn data-lt="preload keyword|preload" data-dfn-type="dfn" id="dfn-preload-keyword">preload</dfn> keyword may be used
with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> elements. This keyword creates an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#external-resource-link">external resource link</a>
    (<dfn data-dfn-type="dfn" id="dfn-preload-link">preload link</dfn>) that is used to declare a resource and its fetch
properties.</p><div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span><span class="issue-label">: feature detection</span></div><p class="">If the preload keyword is used as
an optimization to initiate earlier fetch then no additional feature
detection checks are necessary: browsers that support preload will initiate
earlier fetch, and those that do not will ignore it and fetch the resource
as previously. Otherwise, if the application intends to rely on preload to
fetch the resource, then it can <a href="https://gist.github.com/igrigorik/a02f2359f3bc50ca7a9c">execute a feature detection
    check</a> to verify that it is supported.</p></div><div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span><span class="issue-label">: relationship to prefetch</span></div><p class="">Both <a data-link-type="dfn" href="https://www.w3.org/TR/resource-hints/#dfn-prefetch"><code>prefetch</code></a> and <code>preload</code> declare a resource and its fetch
properties, but differ in how and when the resource is fetched by the user
agent: <a data-link-type="dfn" href="https://www.w3.org/TR/resource-hints/#dfn-prefetch"><code>prefetch</code></a> is an optional and often low-priority fetch for a resource that
might be used by a subsequent navigation; <code>preload</code> is a mandatory
fetch for a resource that is necessary for the current navigation. Developers
should use each one accordingly to minimize resource contention and optimize load
performance.</p></div><section id="processing"><h3 id="x3-1-processing"><bdi class="secno">3.1 </bdi>Processing<a class="self-link" aria-label="§" href="#processing"></a></h3><p>The <dfn data-dfn-type="dfn" id="dfn-appropriate-times">appropriate times</dfn> to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#fetch-and-process-the-linked-resource">fetch and process the linked resource</a>
      are:</p><ul>
<li>When the user agent that supports [<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>] creates a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>
        and processes <code>Link</code> headers that contain a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>.
</li>
<li>When the <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#insert-an-element-into-a-document">inserted into a
        document</a>.
        </li>
<li>When the <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> is created on a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element that is
already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a>.
</li>
<li>When the <code>href</code> attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> is changed.
</li>
<li>When the <code>crossorigin</code> attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a
        <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> that is already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> is set,
changed, or removed.
</li>
<li>When the <code>as</code> attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> is set or changed to a
value that does not or no longer matches the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination">request destination</a> of
the previous obtained external resource, if any.
</li>
<li>When the <code>as</code> attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> but was previously not
obtained due to the <code>as</code> attribute specifying an unsupported <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination">request
        destination</a> is set, removed, or changed.
</li>
<li>When the <code>type</code> attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> but was previously not
obtained due to the <code>type</code> attribute not specifying a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#parsable-mime-type">parsable MIME
        type</a> or specifying an <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#supported-by-the-user-agent">unsupported MIME type</a> for the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination">request
        destination</a> is set, removed, or changed.
</li>
<li>When the <code>media</code> attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
        link</a> that is already <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#in-a-document-tree">in a document tree</a> but was not previously
obtained due the <code>media</code> attribute's value being not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#valid-media-query-list">valid media
        query list</a> or one that does not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#matches-the-environment">match the environment</a> is set,
removed, or changed.
</li>
</ul><p>The user agent <em class="rfc2119" title="SHOULD">SHOULD</em> abort the current request if the <code>href</code>
attribute of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#the-link-element">link</a> element of a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> is changed,
removed, or its value is set to an empty string.</p><p>At these times, the user agent must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#fetch-and-process-the-linked-resource">fetch and process the linked resource</a>
      given by the link element.</p><p>Obtaining the resource given by a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> element <em class="rfc2119" title="MUST NOT">MUST NOT</em>
      <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#delay-the-load-event">delay the load event</a> of the element's <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>.</p><p>Once a preload resource <a href="https://html.spec.whatwg.org/multipage/#process-the-linked-resource">has been processed</a>,
the user agent must add the response to the preload cache. The user agent must also add
responses that are <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network errors</a> to the preload cache.</p><div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div><div class=""><p>It is important that <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network errors</a> be added to the preload cache so
that if a preload request results in an error, the erroneous response isn't re-requested from
the network later. This also has security implications; consider the case where a developer
specifies subresource <a data-link-type="dfn" href="https://www.w3.org/TR/SRI/#integrity-metadata">integrity metadata</a> on a preload request, but not the following
resource request. If the preload request fails
<a href="https://www.w3.org/TR/SRI/#verification-of-html-document-subresources">subresource integrity verification</a>
and is discarded, the resource request will fetch and consume a potentially-malicious response from
the network without verifying its integrity [<cite><a class="bibref" href="#bib-sri" title="Subresource Integrity" data-link-type="biblio">SRI</a></cite>].
</p>
</div></div><div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><div class=""><p>In addition to the HTTP cache, all browser implementations provide
one or more levels of additional caches, which sometimes live before
the HTTP cache (e.g. HTTP/2 server push responses are typically not
committed to HTTP cache until a client request is made), and after the
HTTP cache (e.g. in-process memory caches). These caches are not
defined today and need to be defined in Fetch API— see [related
discussion](https://github.com/whatwg/fetch/issues/354).</p>
<p>Conceptually, a preloaded response ought to be committed to the HTTP
cache, as it is initiated by the client, and also be available in the
memory cache and be re-usable at least once within the lifetime of a
fetch group.</p>
</div></div><div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Note</span></div><div class=""><p>Link HTTP response header should be processed for all types of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination">request destination</a>.</p>
</div></div><div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span></div><div class=""><p>When the <code>media</code> attribute's value does not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#matches-the-environment">match the environment</a>,
the resource will not be preloaded.</p>
</div></div><p>The user agent <em class="rfc2119" title="MUST NOT">MUST NOT</em> automatically execute or apply the resource
against the current page context.</p><div class="note" role="note" id="issue-container-generatedID-5"><div role="heading" class="note-title marker" id="h-note-5" aria-level="4"><span>Note</span></div><p class="">For example, if a JavaScript resource is fetched via a
<a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> and the response contains a <code>no-cache</code> directive, the
fetched response is retained by the user agent and is made immediately
available when fetched with a matching same navigation request at a later
time - e.g. via a <code>script</code> tag or other means. This ensures that the user
agent does not incur an unnecessary revalidation, or a duplicate
download, between the initial resource fetch initiated via the preload
link and a later fetch requesting the same resource.</p></div></section><section id="as-attribute"><h3 id="x3-2-as-attribute"><bdi class="secno">3.2 </bdi><code>as</code> attribute<a class="self-link" aria-label="§" href="#as-attribute"></a></h3><div class="note" role="note" id="issue-container-generatedID-6"><div role="heading" class="note-title marker" id="h-note-6" aria-level="4"><span>Note</span></div><p class="">[<cite><a class="bibref" href="#bib-html" title="HTML Standard" data-link-type="biblio">HTML</a></cite>] <a href="https://html.spec.whatwg.org/multipage/#attr-link-as">defines</a> the
<code>as</code> content and IDL attributes. The attribute is necessary to guarantee
correct prioritization, request matching, application of the correct
[<cite><a class="bibref" href="#bib-csp3" title="Content Security Policy Level 3" data-link-type="biblio">CSP3</a></cite>] policy, and setting of the appropriate <code>Accept</code> request
header.</p></div><p>When the resource is declared via the <code>Link</code> header field
([<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>]), the resource's <code>as</code> attribute is defined via the <code>as</code>
link-extension target attribute. ([<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>] section 5.4)</p><div class="example"><p>Example directives to preload a resource that will be consumed
by...</p>
<table>
          <thead>
            <tr>
              <th>consumer</th>
              <th>Preload directive</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>&lt;audio&gt;</code></td>
              <td><code>&lt;link rel=preload as=audio href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;video&gt;</code></td>
              <td><code>&lt;link rel=preload as=video href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;track&gt;</code></td>
              <td><code>&lt;link rel=preload as=track href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;script&gt;</code>, Worker's
              <em>importScripts</em></td>
              <td><code>&lt;link rel=preload as=script href=...&gt;</code></td>
            </tr>
            <tr>
              <td>
                <code>&lt;link rel=stylesheet&gt;</code>, CSS <a href="https://github.com/import" class="user-mention">@import</a>
              </td>
              <td><code>&lt;link rel=preload as=style href=...&gt;</code></td>
            </tr>
            <tr>
              <td>
                CSS <a href="https://github.com/font-face" class="user-mention">@font-face</a>
              </td>
              <td><code>&lt;link rel=preload as=font href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;img&gt;</code>, <code>&lt;picture&gt;</code>,
              srcset, imageset</td>
              <td><code>&lt;link rel=preload as=image href=...&gt;</code></td>
            </tr>
            <tr>
              <td>SVG's <code>&lt;image&gt;</code>, CSS *-image</td>
              <td><code>&lt;link rel=preload as=image href=...&gt;</code></td>
            </tr>
            <tr>
              <td>XHR, fetch</td>
              <td><code>&lt;link rel=preload as=fetch crossorigin href=...&gt;</code></td>
            </tr>
            <tr>
              <td>Worker, SharedWorker</td>
              <td><code>&lt;link rel=preload as=worker href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;embed&gt;</code></td>
              <td><code>&lt;link rel=preload as=embed href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;object&gt;</code></td>
              <td><code>&lt;link rel=preload as=object href=...&gt;</code></td>
            </tr>
            <tr>
              <td><code>&lt;iframe&gt;</code>, <code>&lt;frame&gt;</code></td>
              <td><code>&lt;link rel=preload as=document
              href=...&gt;</code></td>
            </tr>
          </tbody>
        </table>
</div></section><section id="server-push-http-2"><h3 id="x3-3-server-push-http-2"><bdi class="secno">3.3 </bdi>Server Push (HTTP/2)<a class="self-link" aria-label="§" href="#server-push-http-2"></a></h3><p>HTTP/2 ([<cite><a class="bibref" href="#bib-rfc7540" title="Hypertext Transfer Protocol Version 2 (HTTP/2)" data-link-type="biblio">RFC7540</a></cite>]) allows a server to pre-emptively send ("push")
responses to the client. A pushed response is semantically equivalent to
a server responding to a request and, similar to a preloaded response, is
retained by the user agent and executed by the application when matched
with a request initiated by the application. As such, from an application
perspective, there is no difference between consuming a preload or a
server push response.</p><p>The server <em class="rfc2119" title="MAY">MAY</em> initiate server push for <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> resources
defined by the application for which it is <a href="https://httpwg.github.io/specs/rfc7540.html#authority">authoritative</a>. Initiating
server push eliminates the request roundtrip between client and server
for the declared <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> resource. Optionally, if the use of
server push is not desired for a resource declared via the <code>Link</code> header
field ([<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>]), the developer <em class="rfc2119" title="MAY">MAY</em> provide an opt-out signal to the
server via the <code>nopush</code> target attribute ([<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>] section 5.4). For
example:</p><div class="example" id="example-3">
          <div class="marker">
      <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
    </div> <pre class="nolinks" aria-busy="false"><code class="hljs http"><span class="hljs-attribute">Link</span>: &lt;/app/style.css&gt;; rel=preload; as=style; nopush
<span class="hljs-attribute">Link</span>: &lt;/app/script.js&gt;; rel=preload; as=script</code></pre>
        </div><div class="note" role="note" id="issue-container-generatedID-7"><div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>Note</span></div><p class="">The above example indicates to an HTTP/2 push capable
server that <code>/app/style.css</code> should not be pushed (e.g. the origin may
have additional information indicating that it may already be in cache),
while <code>/app/script.js</code> should be considered as a candidate for server
push.</p></div><p>Initiating server push for a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> is an optional
optimization. For example, the server might omit initiating push if it
believes that the response is available in the client's cache: the client
will process the preload directive, check the relevant caches, and
initiate the request to the server if the resource is missing.
Alternatively, the server might omit initiating push due to operational
concerns, such as available server resources or other criteria. Finally,
the use of server push is subject to negotiated HTTP/2 connection
settings: the client may limit or outright disable the use of server
push. Applications cannot rely on the availability and use of server
push.</p></section></section><section id="conformance"><h2 id="x4-conformance"><bdi class="secno">4. </bdi>Conformance<a class="self-link" aria-label="§" href="#conformance"></a></h2><p>
      As well as sections marked as non-normative, all authoring guidelines,
      diagrams, examples, and notes in this specification are non-normative.
      Everything else in this specification is normative.
    </p><p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST NOT</em>, and <em class="rfc2119">SHOULD</em> in this document
            are to be interpreted as described in
            <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels" data-link-type="biblio">RFC2119</a></cite>]
            [<cite><a class="bibref" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words" data-link-type="biblio">RFC8174</a></cite>] when, and only when, they appear
            in all capitals, as shown here.
          </p><p>There is only one class of product that can claim conformance to this
specification: a <dfn data-dfn-type="dfn" id="dfn-user-agent">user agent</dfn>.</p></section><section class="appendix informative" id="use-cases"><h2 id="a-use-cases"><bdi class="secno">A. </bdi>Use cases<a class="self-link" aria-label="§" href="#use-cases"></a></h2><p><em>This section is non-normative.</em></p><section id="early-fetch-of-critical-resources"><h3 id="a-1-early-fetch-of-critical-resources"><bdi class="secno">A.1 </bdi>Early fetch of critical resources<a class="self-link" aria-label="§" href="#early-fetch-of-critical-resources"></a></h3><p>Preload parsers are used by most user agents to initiate early
resource fetches while the main document parser is blocked due to a
blocking script. However, the preload parsers do not execute JavaScript,
and typically only perform a shallow parse of CSS, which means that the
fetch of resources specified within JavaScript and CSS is delayed until
the relevant document parser is able to process the resource
declaration.</p><p>In effect, most resources declarations specified within JavaScript and
CSS are "hidden" from the speculative parsers and incur a performance
penalty. To address this, the application can use a <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>
to declaratively specify which resources the user agent must fetch early
to improve page performance:</p><div class="example" id="example-4-early-fetch-of-critical-resources">
          <div class="marker">
      <a class="self-link" href="#example-4-early-fetch-of-critical-resources">Example<bdi> 4</bdi></a><span class="example-title">: Early fetch of critical resources</span>
    </div> <pre class="nolinks" aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/assets/font.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/style/other.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//example.com/resource"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"fetch"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.example.com/font.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">crossorigin</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span>&gt;</span></code></pre>
        </div><p>Above markup initiates four resource fetches: a font resource, a
stylesheet, an unknown resource type from another origin, and a font
resource from another origin. Each fetch is initialized with appropriate
request headers and priority - the unknown type is equivalent to a fetch
initiated <code>XMLHttpRequest</code> request. Further, these requests do not block
the parser or the load event.</p><div class="note" role="note" id="issue-container-generatedID-8"><div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>Note</span></div><p class="">Preload links for CORS enabled resources, such as fonts
or images with a <code>crossorigin</code> attribute, must also include a
<code>crossorigin</code> attribute, in order for the resource to be properly
used.</p></div></section><section id="early-fetch-and-application-defined-execution"><h3 id="a-2-early-fetch-and-application-defined-execution"><bdi class="secno">A.2 </bdi>Early fetch and application defined execution<a class="self-link" aria-label="§" href="#early-fetch-and-application-defined-execution"></a></h3><p>The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> can be used by the application to initiate
early fetch of one or more resources, as well as to provide custom logic
for when and how each response should be applied to the document. The
application may:</p><ul>
<li>Decide to immediately apply each resource as it becomes
available.</li>
<li>Ensure that resources are applied in some application specific
order.</li>
<li>Apply resources conditionally based on arbitrary resource or
application criteria.</li>
<li>Defer resource application until some application condition is
met.</li>
</ul><p>The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> provides a low-level and content-type agnostic
primitive that enables applications to build custom resource loading and
execution behaviors without incurring the penalty of delayed resource
loading.</p><p>For example, <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> enables the application to provide
<code>async</code> and <code>defer</code> like semantics, which are only available on <code>script</code>
elements today, but for any content-type: applying the resource
immediately after it is available provides <code>async</code> functionality, whereas
adding some ordering logic enables <code>defer</code> functionality. Further, this
behavior can be defined across a mix of content-types - the application
is in full control over when and how each resource is applied.</p><div class="example" id="example-5">
          <div class="marker">
      <a class="self-link" href="#example-5">Example<bdi> 5</bdi></a>
    </div> <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preloadFinished</span>(<span class="hljs-params">e</span>) </span>{ ... }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preloadError</span>(<span class="hljs-params">e</span>)  </span>{ ... }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- listen for load and error events --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"app.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">"preloadFinished()"</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">"preloadError()"</span>&gt;</span></code></pre>
        </div><p>By decoupling resource fetching from execution, the <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload
      link</a> provides a future-proof primitive for building performant
application specific resource loading strategies.</p></section><section id="developer-server-and-proxy-initiated-fetching"><h3 id="a-3-developer-server-and-proxy-initiated-fetching"><bdi class="secno">A.3 </bdi>Developer, server, and proxy-initiated fetching<a class="self-link" aria-label="§" href="#developer-server-and-proxy-initiated-fetching"></a></h3><p>The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a> can be specified by the developer, or be
automatically generated by the application server or an optimization
proxy (e.g. a CDN).</p><div class="example" id="example-6">
          <div class="marker">
      <a class="self-link" href="#example-6">Example<bdi> 6</bdi></a>
    </div> <pre class="nolinks" aria-busy="false"><code class="hljs http"><span class="hljs-attribute">Link</span>: &lt;https://example.com/font.woff2&gt;; rel=preload; as=font; type="font/woff2"
<span class="hljs-attribute">Link</span>: &lt;https://example.com/app/script.js&gt;; rel=preload; as=script
<span class="hljs-attribute">Link</span>: &lt;https://example.com/logo-hires.jpg&gt;; rel=preload; as=image
<span class="hljs-attribute">Link</span>: &lt;https://fonts.example.com/font.woff2&gt;; rel=preload; as=font; crossorigin; type="font/woff2"</code></pre>
        </div><div class="example" id="example-7">
          <div class="marker">
      <a class="self-link" href="#example-7">Example<bdi> 7</bdi></a>
    </div> <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//example.com/widget.html"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"document"</span>&gt;</span></code></pre>
        </div><div class="example" id="example-8">
          <div class="marker">
      <a class="self-link" href="#example-8">Example<bdi> 8</bdi></a>
    </div> <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> res = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"link"</span>);
res.rel = <span class="hljs-string">"preload"</span>;
res.as = <span class="hljs-string">"document"</span>;
res.href = <span class="hljs-string">"/other/widget.html"</span>;
<span class="hljs-built_in">document</span>.head.appendChild(res);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
        </div><ul>
<li>The application can specify preload links, allowing:
<ul>
<li>The user agent to initiate early fetch of critical
resources.</li>
<li>The optimization proxy to fetch the critical resources and
place them into its cache ahead of time, thus reducing or
eliminating the latency of retrieving resources from origin.</li>
</ul>
</li>
<li>The optimization proxy can specify preload links on behalf of the
application:
<ul>
<li>The proxy can observe and infer critical resources based on
past request patterns, allowing it to automate generation of
relevant preload links to improve page performance.</li>
<li>The proxy can deliver inferred preload links to the user agent
while it is blocked on the response from the origin, allowing the
user agent to begin early fetch of associated critical resources.
<ul>
<li>Many existing optimization proxies implement "early flush"
strategies where references to associated critical resources
are automatically delivered to the user agent while the proxy
is blocked on the response from the origin. Today, this is
typically done by creating a fake document <code>head</code> that contains
<code>XMLHttpRequest</code>, <code>image</code>, and <code>object</code> requests for the
associated critical resources. However, in practice, these
implementations are brittle and often result in prioritization
conflicts with requests initiated by speculative and document
parsers, or worse, result in delayed or double downloads due to
missing request context information. The <a href="#dfn-preload-link" class="internalDFN" data-link-type="dfn">preload link</a>
addresses these problems by providing a declarative fetch
primitive, and interoperability with the HTTP Link header, that
communicates both the URL and the context of the resource.
</li>
</ul>
</li>
</ul>
</li>
</ul></section></section><section id="iana-considerations"><h2 id="b-iana-considerations"><bdi class="secno">B. </bdi>IANA Considerations<a class="self-link" aria-label="§" href="#iana-considerations"></a></h2><p>The link relation type below has been registered by IANA per Section
6.2.1 of [<cite><a class="bibref" href="#bib-rfc5988" title="Web Linking" data-link-type="biblio">RFC5988</a></cite>]:</p><dl>
<dt>Relation Name:</dt>
<dd>preload</dd>
<dt>Description:</dt>
<dd>Refers to a resource that should be loaded early in the processing of
the link's context, without blocking rendering.</dd>
<dt>Reference:</dt>
<dd>
<a href="https://www.w3.org/TR/preload/"><abbr title="World Wide Web Consortium">W3C</abbr> Preload Specification
        (https://www.w3.org/TR/preload/)</a>
</dd>
<dt>Note:</dt>
<dd>Additional target attributes establish the detailed fetch properties
of the link.</dd>
</dl></section><section id="privacy" class="informative"><h2 id="c-privacy-and-security"><bdi class="secno">C. </bdi>Privacy and Security<a class="self-link" aria-label="§" href="#privacy"></a></h2><p><em>This section is non-normative.</em></p><p>Preload is a declarative fetch primitive that initiates early fetch of
resources and separates fetching from resource execution. In effect, it is
conceptually similar to initiating a scripted fetch for a resource, but
with additional constraints and benefits:</p><ul>
<li>The resource declaration is visible via HTTP headers or HTML markup,
which allows the user agent to initiate the fetch earlier, and without
blocking on JavaScript execution.</li>
<li>The response is not executed and there is no callback to retrieve its
payload. The response is retrieved and executed by initiating another
fetch (via script, DOM element, etc) that matches the preloaded
response.</li>
<li>The developer can specify the target context that will consume the
response via <code>as</code> attribute, which allows the user agent to enforce the
relevant CSP policies when initiating the preload fetch. If <code>as</code> is
omitted, preload defaults to same security and privacy processing as a
call to <code>fetch()</code> - i.e. subject to <code>connect-src</code>.</li>
</ul><p>The site authors are encouraged to take the necessary precautions and
specify the relevant [<cite><a class="bibref" href="#bib-csp3" title="Content Security Policy Level 3" data-link-type="biblio">CSP3</a></cite>], [<cite><a class="bibref" href="#bib-mixed-content" title="Mixed Content" data-link-type="biblio">MIXED-CONTENT</a></cite>], and
[<cite><a class="bibref" href="#bib-referrer-policy" title="Referrer Policy" data-link-type="biblio">REFERRER-POLICY</a></cite>] rules, such that the browser can enforce them when
initiating the preload request. Additionally, if preload directives are
provided via the <code>Link</code> HTTP response header, then the relevant policies
should also be delivered as an HTTP response header - e.g. see <a href="https://w3c.github.io/webappsec/specs/content-security-policy/#complications">
    Processing Complications</a> for CSP.</p></section><section class="appendix informative" id="acknowledgments"><h2 id="d-acknowledgments"><bdi class="secno">D. </bdi>Acknowledgments<a class="self-link" aria-label="§" href="#acknowledgments"></a></h2><p><em>This section is non-normative.</em></p><p>This document reuses text from the [<cite><a class="bibref" href="#bib-html" title="HTML Standard" data-link-type="biblio">HTML</a></cite>] specification, edited by
Ian Hickson, as permitted by the license of that specification.</p></section><section id="references" class="appendix">
      <h2 id="e-references"><bdi class="secno">E. </bdi>References<a class="self-link" aria-label="§" href="#references"></a></h2>
      
    <section id="normative-references">
        <h3 id="e-1-normative-references"><bdi class="secno">E.1 </bdi>Normative references<a class="self-link" aria-label="§" href="#normative-references"></a></h3>
      <dl class="bibliography">
        <dt id="bib-dom">[DOM]</dt><dd><a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a></dd><dt id="bib-fetch">[FETCH]</dt><dd><a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a></dd><dt id="bib-html">[HTML]</dt><dd><a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a></dd><dt id="bib-mimesniff">[MIMESNIFF]</dt><dd><a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Gordon P. Hemsley.  WHATWG. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a></dd><dt id="bib-resource-hints">[RESOURCE-HINTS]</dt><dd><a href="https://www.w3.org/TR/resource-hints/"><cite>Resource Hints</cite></a>. Ilya Grigorik.  W3C. 7 March 2019. W3C Working Draft. URL: <a href="https://www.w3.org/TR/resource-hints/">https://www.w3.org/TR/resource-hints/</a></dd><dt id="bib-rfc2119">[RFC2119]</dt><dd><a href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd><dt id="bib-rfc5988">[RFC5988]</dt><dd><a href="https://tools.ietf.org/html/rfc5988"><cite>Web Linking</cite></a>. M. Nottingham.  IETF. October 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5988">https://tools.ietf.org/html/rfc5988</a></dd><dt id="bib-rfc7540">[RFC7540]</dt><dd><a href="https://httpwg.org/specs/rfc7540.html"><cite>Hypertext Transfer Protocol Version 2 (HTTP/2)</cite></a>. M. Belshe; R. Peon; M. Thomson, Ed..  IETF. May 2015. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc7540.html">https://httpwg.org/specs/rfc7540.html</a></dd><dt id="bib-rfc8174">[RFC8174]</dt><dd><a href="https://tools.ietf.org/html/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc8174">https://tools.ietf.org/html/rfc8174</a></dd><dt id="bib-sri">[SRI]</dt><dd><a href="https://www.w3.org/TR/SRI/"><cite>Subresource Integrity</cite></a>. Devdatta Akhawe; Frederik Braun; Francois Marier; Joel Weinberger.  W3C. 23 June 2016. W3C Recommendation. URL: <a href="https://www.w3.org/TR/SRI/">https://www.w3.org/TR/SRI/</a></dd>
      </dl></section><section id="informative-references">
        <h3 id="e-2-informative-references"><bdi class="secno">E.2 </bdi>Informative references<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
      <dl class="bibliography">
        <dt id="bib-csp3">[CSP3]</dt><dd><a href="https://www.w3.org/TR/CSP3/"><cite>Content Security Policy Level 3</cite></a>. Mike West.  W3C. 15 October 2018. W3C Working Draft. URL: <a href="https://www.w3.org/TR/CSP3/">https://www.w3.org/TR/CSP3/</a></dd><dt id="bib-mixed-content">[MIXED-CONTENT]</dt><dd><a href="https://www.w3.org/TR/mixed-content/"><cite>Mixed Content</cite></a>. Mike West.  W3C. 2 August 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a></dd><dt id="bib-referrer-policy">[REFERRER-POLICY]</dt><dd><a href="https://www.w3.org/TR/referrer-policy/"><cite>Referrer Policy</cite></a>. Jochen Eisinger; Emily Stark.  W3C. 26 January 2017. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/referrer-policy/">https://www.w3.org/TR/referrer-policy/</a></dd>
      </dl></section></section><p role="navigation" id="back-to-top"><a href="#title"><abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>